{% extends "project/project_profile.html" %}

{% load static %}

{% block breadcrumb %}
    <nav class="breadcrumb has-succeeds-separator is-size-7" aria-label="breadcrumbs">
        <ul>
            <li><a class="link-one" href="/">INCIPIT-CRIS</a></li>
            <li><a class="link-one" href="/projects/">Projets</a></li>
            <li><a class="link-one" href="/projects/{{ data_project.pid }}">Profil</a></li>
            <li class="is-active"><a href="/projects/{{ data_project.pid }}/edition" aria-current="page">Edition</a></li>
        </ul>
    </nav>
{% endblock %}

{% block information %}
    {{ message }}
{% endblock %}


{% block information_header %}

    <div class="column logo">
        <figure class="figure">
            <img src=
            {% if data_project.logo == '' %}
                "{% static 'images/folder-solid.png' %}"
            {% else %}
                "{{ data_project.logo }}"
            {% endif %}
            width="100" height="100">
        </figure>
        <a class="edit-project link-one is-size-6" href="/projects/edition/field/logo/{{data_project.pid}}"><i class="fas fa-edit"></i></a>
    </div>

    <a class="button is-primary" href="/projects/{{ data_project.pid }}">Voir le projet</a>

    <form action="/projects/edition/update-project/{{data_project.pid}}" method="post">
        {% csrf_token %}
        <input type="hidden" id="projectARK" name="projectARK" value="{{ data_project.pid }}">
        <input class="shift-button button is-warning" type="submit" value="Mettre à jour">
    </form>

    <form action="/projects/edition/delete-project/{{data_project.pid}}" method="post">
        {% csrf_token %}
        <input type="hidden" id="projectARK" name="projectARK" value="{{ data_project.pid }}">
        <input class="button is-danger" type="submit" value="Supprimer">
    </form>

    <p class="title is-4" align="justify">
        {{ data_project.name }} <a class="link-one is-size-6" href="/projects/edition/field/name/{{data_project.pid}}"><i class="fas fa-edit"></i></a>
    </p>

    <p class="subtitle is-6" align="justify">
        {% if data_project.description == "" %}
            <a class="link-one" href="/projects/edition/field/description/{{data_project.pid}}"> Ajouter une description</a>
        {% else %}
            {{ data_project.description }}
            <a class="link-one" href="/projects/edition/field/description/{{data_project.pid}}"><i class="fas fa-edit"></i></a>
        {% endif %}
    </p>
{% endblock %}

{% block information_relative_data %}
    <p class="title-data"><time datetime="{{ data_project.founding_date }}">Date de début :</p>
    <ul>
        <li class="data">{{ data_project.founding_date }}</time> <a class="link-one" href="/projects/edition/field/foundingDate/{{data_project.pid}}"><i class="fas fa-edit"></i></a></li>
    </ul>
    <p class="title-data"><time datetime="{{ data_project.dissolution_date }}">Date de fin :</p>
    <ul>
        <li class="data">{{ data_project.dissolution_date }}</time> <a class="link-one" href="/projects/edition/field/dissolutionDate/{{data_project.pid}}"><i class="fas fa-edit"></i></a></li>
    </ul>
    <p class="title-data">URL : </p>
    <ul>
        <li class="data"><a class="link-one" href="{{ data_project.url }}"> {{ data_project.url }}</a> <a class="link-one" href="/projects/edition/field/url/{{data_project.pid}}"><i class="fas fa-edit"></i></a></li>
    </ul>
{% endblock %}

{% block information_members %}
    <p class="title-data">Membre(s) : <a class="link-one" href="/projects/edition/field/add-member/{{data_project.pid}}"><i class="fas fa-plus-circle"></i></a></p>
    <ul>
        {% for member in data_project.members %}
            <form action="/projects/edition/field/delete-member/{{data_project.pid}}" method="post">
                {% csrf_token %}
                <input type="hidden" id="memberARK" name="memberARK" value="{{ member.0 }}">
                <li class="data"><a class="link-one" href="/persons/{{ member.0 }}">{{ member.1.given_name }} {{ member.1.family_name }}</a>
                <button class="delete"></button></li>
            </form>
        {% endfor %}
    </ul>
{% endblock %}

{% block information_elements_linked %} 
    <p class="title-data">Article(s) : <a class="link-one" href="/projects/edition/field/add-article/{{data_project.pid}}"><i class="fas fa-plus-circle"></i></a></p>
    <ul>
        {% for article in data_project.articles %}
            <form action="/projects/edition/field/delete-article/{{data_project.pid}}" method="post">
                {% csrf_token %}
                <input type="hidden" id="articleARK" name="articleARK" value="{{ article.0 }}">
                <li class="data"><a class="link-one" href="/articles/{{ article.0 }}">{{ article.1.name }}</a>
                <button class="delete"></button></li>
            </form>
        {% endfor %}
    </ul>

    <p class="title-data">Jeu(x) de données : <a class="link-one" href="/projects/edition/field/add-dataset/{{data_project.pid}}"><i class="fas fa-plus-circle"></i></a></p>
    <ul>
        {% for dataset in data_project.datasets %}
            <form action="/projects/edition/field/delete-dataset/{{data_project.pid}}" method="post">
                {% csrf_token %}
                <input type="hidden" id="datasetARK" name="datasetARK" value="{{ dataset.0 }}">
                <li class="data"><a class="link-one" href="/datasets/{{ dataset.0 }}">{{ dataset.1.name }}</a>
                <button class="delete"></button></li>
            </form>
        {% endfor %}
    </ul>

    <p class="title-data">Institution(s) : <a class="link-one" href="/projects/edition/field/add-institution/{{data_project.pid}}"><i class="fas fa-plus-circle"></i></a></p>
    <ul>
        {% for institution in data_project.institutions %}
            <form action="/projects/edition/field/delete-institution/{{data_project.pid}}" method="post">
                {% csrf_token %}
                <input type="hidden" id="institutionARK" name="institutionARK" value="{{ institution.pid }}">
                <li class="data"><a class="link-one" href="/institutions/{{ institution.pid }}">{{ institution.name }} ({{ institution.alternate_name }})</a>
                <button class="delete"></button></li>
            </form>
        {% endfor %}
    </ul>

    <p class="title-data">Bailleur(s) de fonds : <a class="link-one" href="/projects/edition/field/add-funder/{{data_project.pid}}"><i class="fas fa-plus-circle"></i></a></p>
    <ul>
        {% for funder in data_project.funders %}
            <form action="/projects/edition/field/delete-funder/{{data_project.pid}}" method="post">
                {% csrf_token %}
                <input type="hidden" id="funderARK" name="funderARK" value="{{ funder.pid }}">
                <li class="data"><a class="link-one" href="/institutions/{{ funder.pid }}">{{ funder.name }} ({{ funder.alternate_name }})</a>
                <button class="delete"></button></li>
            </form>
        {% endfor %}
    </ul>

{% endblock %}