{% extends "institution/institution_profile.html" %}

{% load static %}

{% block breadcrumb %}
    <nav class="breadcrumb has-succeeds-separator is-size-7" aria-label="breadcrumbs">
        <ul>
            <li><a class="link-one" href="/">INCIPIT-CRIS</a></li>
            <li><a class="link-one" href="/institutions/">Institutions</a></li>
            <li><a class="link-one" href="/institutions/{{ data_institution.pid }}">Profil</a></li>
            <li class="is-active"><a href="/institutions/{{ data_institution.pid }}/edition" aria-current="page">Edition</a></li>
        </ul>
    </nav>
{% endblock %}

{% block information %}
    {{ message }}
{% endblock %}


{% block information_header %}

    <div class="column logo">
        <figure class="figure">
            <img src=
            {% if data_institution.logo == '' %}
                "{% static 'images/university-solid.png' %}"
            {% else %}
                "{{ data_institution.logo }}"
            {% endif %}
            width="250" height="250">
        </figure>
        <a class="edit-institution link-one is-size-6" href="/institutions/edition/field/logo/{{data_institution.pid}}"><i class="fas fa-edit"></i></a>
    </div>

    <div class="column">
        <p class="title is-4" align="justify">
            {{ data_institution.name }} <a class="link-one is-size-6" href="/institutions/edition/field/name/{{data_institution.pid}}"><i class="fas fa-edit"></i></a>
            (
            {% if data_institution.alternate_name == "" %}
                <a class="link-one" href="/institutions/edition/field/alternateName/{{data_institution.pid}}"> Ajouter un nom alternatif</a>
            {% else %}
                {{ data_institution.alternate_name }} <a class="link-one is-size-6" href="/institutions/edition/field/alternateName/{{data_institution.pid}}"><i class="fas fa-edit"></i></a>
            {% endif %}
            )
        </p>

        <p class="subtitle is-6" align="justify">
            {% if data_institution.description == "" %}
                <a class="link-one" href="/institutions/edition/field/description/{{data_institution.pid}}"> Ajouter une description</a>
            {% else %}
                {{ data_institution.description }}
                <a class="link-one" href="/institutions/edition/field/description/{{data_institution.pid}}"><i class="fas fa-edit"></i></a>
            {% endif %}
        </p>
    </div>

    <div class="column">
        <div class="columns is-gapless is-multiline">
            <div class="column shift">
                <a class="button is-primary" href="/institutions/{{ data_institution.pid }}">Voir l'institution</a>
            </div>

            <div class="column shift">
                <form action="/institutions/edition/update-institution/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="institutionARK" name="institutionARK" value="{{ data_institution.pid }}">
                    <input class="button is-warning" type="submit" value="Mettre à jour">
                </form>
            </div>

            <div class="column">
                <form action="/institutions/edition/delete-institution/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="institutionARK" name="institutionARK" value="{{ data_institution.pid }}">
                    <input class="button is-danger" type="submit" value="Supprimer">
                </form>
            </div>
        </div>
    </div>

{% endblock %}

{% block apropos %}
    <p>Nom : {{ data_institution.name }} <a class="link-one is-size-6" href="/institutions/edition/field/name/{{data_institution.pid}}"><i class="fas fa-edit"></i></a></p>
    <p>Nom alternatif : {{ data_institution.alternate_name }} <a class="link-one is-size-6" href="/institutions/edition/field/alternateName/{{data_institution.pid}}"><i class="fas fa-edit"></i></a></p>
    <p>Description : {{ data_institution.description }} <a class="link-one" href="/institutions/edition/field/description/{{data_institution.pid}}"><i class="fas fa-edit"></i></a></p>
    <p>Lien vers l'institution : {{ data_institution.url }} <a class="edit-institution link-one is-size-6" href="/institutions/edition/field/url/{{data_institution.pid}}"><i class="fas fa-edit"></i></a></p>
    <p>Date de fondation : {{ data_institution.founding_date }} <a class="edit-institution link-one is-size-6" href="/institutions/edition/field/foundingDate/{{data_institution.pid}}"><i class="fas fa-edit"></i></a></p>
    <p>Organisations parente : <a class="link-one" href="/institutions/edition/field/add-parent-institution/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for organization in data_institution.parent_organizations %}
                <form action="/institutions/edition/field/delete-parent-institution/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="institutionARK" name="institutionARK" value="{{ organization.1.pid }}">
                    <li class="data"><a class="link-one" href="/institutions/{{ organization.1.pid }}">{{ organization.1.name }} ({{ organization.1.alternate_name }})</a>
                    <button class="delete"></button></li>
                </form>
            {% endfor %}
        </ul>
    </p>
    <p>Sous-organisations : <a class="link-one" href="/institutions/edition/field/add-sub-institution/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for organization in data_institution.sub_organizations %}
                <form action="/institutions/edition/field/delete-sub-institution/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="institutionARK" name="institutionARK" value="{{ organization.1.pid }}">
                    <li class="data"><a class="link-one" href="/institutions/{{ organization.1.pid }}">{{ organization.1.name }} ({{ organization.1.alternate_name }})</a>
                    <button class="delete"></button></li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}

{% block workers %}
    <p>Employés : <a class="link-one" href="/institutions/edition/field/add-worker/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for worker in data_institution.workers %}
                <form action="/institutions/edition/field/delete-worker/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="workerARK" name="workerARK" value="{{ worker.pid }}">
                    <li class="data"><a class="link-one" href="/persons/{{ worker.pid }}">{{ worker.given_name }} {{ worker.family_name }}</a>
                    <button class="delete"></button></li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}

{% block affiliates %}
    <p>Affiliés : <a class="link-one" href="/institutions/edition/field/add-affiliate/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for affiliate in data_institution.affiliates %}
                <form action="/institutions/edition/field/delete-affiliate/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="affiliateARK" name="affiliateARK" value="{{ affiliate.pid }}">
                    <li class="data"><a class="link-one" href="/persons/{{ affiliate.pid }}">{{ affiliate.given_name }} {{ affiliate.family_name }}</a>
                    <button class="delete"></button></li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}

{% block articles %}
    <p>Articles : <a class="link-one" href="/institutions/edition/field/add-article/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for article in data_institution.articles %}
                <form action="/institutions/edition/field/delete-article/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="articleARK" name="articleARK" value="{{ article.pid }}">
                    <li class="data">
                        <a class="link-one" href="/articles/{{ article.pid }}">{{ article.name }}</a>
                        <button class="delete"></button>
                    </li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}

{% block projects %}
    <p>Projets : <a class="link-one" href="/institutions/edition/field/add-project/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for project in data_institution.projects %}
                <form action="/institutions/edition/field/delete-project/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="projectARK" name="projectARK" value="{{ project.pid }}">
                    <li class="data">
                        <a class="link-one" href="/projects/{{ project.pid }}">{{ project.name }}</a>
                        <button class="delete"></button>
                    </li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}

{% block dataset %}
    <p>Données : <a class="link-one" href="/institutions/edition/field/add-dataset/{{data_institution.pid}}"><i class="fas fa-plus-circle"></i></a>
        <ul>
            {% for dataset in data_institution.datasets %}
                <form action="/institutions/edition/field/delete-dataset/{{data_institution.pid}}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="datasetARK" name="datasetARK" value="{{ dataset.pid }}">
                    <li class="data">
                        <a class="link-one" href="/datasets/{{ dataset.pid }}">{{ dataset.name }}</a>
                        <button class="delete"></button>
                    </li>
                </form>
            {% endfor %}
        </ul>
    </p>
{% endblock %}
